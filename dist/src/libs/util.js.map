{"version":3,"sources":["../../../src/libs/util.js"],"names":["util","title","window","document","ajaxUrl","ajax","create","baseURL","timeout","inOf","arr","targetArr","res","map","indexOf","item","oneOf","ele","showThisRoute","itAccess","currentAccess","isArray","getRouterObjByName","routers","name","routerObj","forEach","children","child","i","length","handleTitle","vm","$t","i18n","setCurrentPath","isOtherRouter","$store","state","currentPathArr","path","currentPathObj","filter","childArr","len","childObj","commit","openNewPage","argu","query","pageOpenedList","openedPageLen","tagHasOpened","index","tag","tagsList","toDefaultPage","route","next","notHandle","redirect","undefined","replace"],"mappings":"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","file":"util.js","sourcesContent":["import axios from 'axios';\nimport env from '../config/env';\n\nlet util = {\n\n};\nutil.title = function (title) {\n    title = title || 'iView admin';\n    window.document.title = title;\n};\n\nconst ajaxUrl = env === 'development'\n    ? 'http://127.0.0.1:8888'\n    : env === 'production'\n    ? 'https://www.url.com'\n    : 'https://debug.url.com';\n\nutil.ajax = axios.create({\n    baseURL: ajaxUrl,\n    timeout: 30000\n});\n\nutil.inOf = function (arr, targetArr) {\n    let res = true;\n    arr.map(item => {\n        if (targetArr.indexOf(item) < 0) {\n            res = false;\n        }\n    });\n    return res;\n};\n\nutil.oneOf = function (ele, targetArr) {\n    if (targetArr.indexOf(ele) >= 0) {\n        return true;\n    } else {\n        return false;\n    }\n};\n\nutil.showThisRoute = function (itAccess, currentAccess) {\n    if (typeof itAccess === 'object' && itAccess.isArray()) {\n        return util.oneOf(currentAccess, itAccess);\n    } else {\n        return itAccess === currentAccess;\n    }\n};\n\nutil.getRouterObjByName = function (routers, name) {\n    let routerObj = {};\n    routers.forEach(item => {\n        if (item.name === 'otherRouter') {\n            item.children.forEach((child, i) => {\n                if (child.name === name) {\n                    routerObj = item.children[i];\n                }\n            });\n        } else {\n            if (item.children.length === 1) {\n                if (item.children[0].name === name) {\n                    routerObj = item.children[0];\n                }\n            } else {\n                item.children.forEach((child, i) => {\n                    if (child.name === name) {\n                        routerObj = item.children[i];\n                    }\n                });\n            }\n        }\n    });\n    return routerObj;\n};\n\nutil.handleTitle = function (vm, item) {\n    if (typeof item.title === 'object') {\n        return vm.$t(item.title.i18n);\n    } else {\n        return item.title;\n    }\n};\n\nutil.setCurrentPath = function (vm, name) {\n    let title = '';\n    let isOtherRouter = false;\n    vm.$store.state.routers.forEach(item => {\n        if (item.children.length === 1) {\n            if (item.children[0].name === name) {\n                title = util.handleTitle(vm, item);\n                if (item.name === 'otherRouter') {\n                    isOtherRouter = true;\n                }\n            }\n        } else {\n            item.children.forEach(child => {\n                if (child.name === name) {\n                    title = util.handleTitle(vm, child);\n                    if (item.name === 'otherRouter') {\n                        isOtherRouter = true;\n                    }\n                }\n            });\n        }\n    });\n    let currentPathArr = [];\n    if (name === 'home_index') {\n        currentPathArr = [\n            {\n                title: util.handleTitle(vm, util.getRouterObjByName(vm.$store.state.routers, 'home_index')),\n                path: '',\n                name: 'home_index'\n            }\n        ];\n    } else if ((name.indexOf('_index') >= 0 || isOtherRouter) && name !== 'home_index') {\n        currentPathArr = [\n            {\n                title: util.handleTitle(vm, util.getRouterObjByName(vm.$store.state.routers, 'home_index')),\n                path: '/home',\n                name: 'home_index'\n            },\n            {\n                title: title,\n                path: '',\n                name: name\n            }\n        ];\n    } else {\n        let currentPathObj = vm.$store.state.routers.filter(item => {\n            if (item.children.length <= 1) {\n                return item.children[0].name === name;\n            } else {\n                let i = 0;\n                let childArr = item.children;\n                let len = childArr.length;\n                while (i < len) {\n                    if (childArr[i].name === name) {\n                        return true;\n                    }\n                    i++;\n                }\n                return false;\n            }\n        })[0];\n        if (currentPathObj.children.length <= 1 && currentPathObj.name === 'home') {\n            currentPathArr = [\n                {\n                    title: '首页',\n                    path: '',\n                    name: 'home_index'\n                }\n            ];\n        } else if (currentPathObj.children.length <= 1 && currentPathObj.name !== 'home') {\n            currentPathArr = [\n                {\n                    title: '首页',\n                    path: '/home',\n                    name: 'home_index'\n                },\n                {\n                    title: currentPathObj.title,\n                    path: '',\n                    name: name\n                }\n            ];\n        } else {\n            let childObj = currentPathObj.children.filter((child) => {\n                return child.name === name;\n            })[0];\n            currentPathArr = [\n                {\n                    title: '首页',\n                    path: '/home',\n                    name: 'home_index'\n                },\n                {\n                    title: currentPathObj.title,\n                    path: '',\n                    name: currentPathObj.name\n                },\n                {\n                    title: childObj.title,\n                    path: currentPathObj.path + '/' + childObj.path,\n                    name: name\n                }\n            ];\n        }\n    }\n    vm.$store.commit('setCurrentPath', currentPathArr);\n\n    return currentPathArr;\n};\n\nutil.openNewPage = function (vm, name, argu, query) {\n    let pageOpenedList = vm.$store.state.pageOpenedList;\n    let openedPageLen = pageOpenedList.length;\n    let i = 0;\n    let tagHasOpened = false;\n    while (i < openedPageLen) {\n        if (name === pageOpenedList[i].name) {  // 页面已经打开\n            vm.$store.commit('pageOpenedList', {\n                index: i,\n                argu: argu,\n                query: query\n            });\n            tagHasOpened = true;\n            break;\n        }\n        i++;\n    }\n    if (!tagHasOpened) {\n        let tag = vm.$store.state.tagsList.filter((item) => {\n            if (item.children) {\n                return name === item.children[0].name;\n            } else {\n                return name === item.name;\n            }\n        });\n        tag = tag[0];\n        tag = tag.children ? tag.children[0] : tag;\n        if (argu) {\n            tag.argu = argu;\n        }\n        if (query) {\n            tag.query = query;\n        }\n        vm.$store.commit('increateTag', tag);\n    }\n    vm.$store.commit('setCurrentPageName', name);\n};\n\nutil.toDefaultPage = function (routers, name, route, next) {\n    let len = routers.length;\n    let i = 0;\n    let notHandle = true;\n    while (i < len) {\n        if (routers[i].name === name && routers[i].redirect === undefined) {\n            route.replace({\n                name: routers[i].children[0].name\n            });\n            notHandle = false;\n            next();\n            break;\n        }\n        i++;\n    }\n    if (notHandle) {\n        next();\n    }\n};\n\nexport default util;\n"]}